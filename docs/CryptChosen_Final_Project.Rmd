---
title: "The rising price of Bitcoin, compared to the global inflation of fiat currency"
author: "CRYPTCHOSEN: Ethan Swaidner, Josh Braseth, and Steven Bogus"
date: "Friday, May 3, 2024"
output:
  html_document:
    highlight: tango
    theme: cosmo
    toc: true
    toc_float: true
    toc_depth: 2
    collapsed: false
    smooth_scroll: false
    df_print: kable
---

```{r, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE)
```

<!-- DO NOT EDIT ANYTHING ABOVE THIS LINE -->

```{r setup, include=FALSE}
# tidyverse does not work on my machine, so we need to install the packages separately
library(ggplot2)
library(dplyr)
library(tidyr)
library(readr)
library(infer)
library(lubridate)
library(janitor)
library(knitr)
library(moderndive)
```

<img src="../assets/images/wazir_article_img_eight.jpg" alt="Crypto Graph" onerror="this.onerror=null; this.src='https://stat2.moneycontrol.com/assets/images/ms/wazirx/wazir_article_img_eight.jpg'">


#### Last updated on 2024-05-03

<br>

# 1. Introduction

Cryptocurrency, and in particular Bitcoin, has come a long way from its meteoric rise in the early 2010's. What was once considered a waste of money, and not highly regarded, has dramatically increased in price and now is staple of the online space and modern world. As bitcoin continues its rise, it's important to consider that inflation rates within the global economy continue to climb. Our project investigates whether there's a correlation between global economic inflation and the value of Bitcoin - and if there is one, what exactly is the correlation that can be drawn?

To answer this question, we will be using our data set derived from the CryptoCompare API<a href="https://min-api.cryptocompare.com/documentation?key=Historical&cat=dataHistoday">³</a>, which shows the price of Bitcoin and its price movements over the past ten years. CryptoCompare is an FCA benchmark administrator<a href="https://finance.yahoo.com/news/cryptocompare-gets-fca-authorization-operate-125346571.html">²</a> and is used by some of the largest companies such as Coinbase, and Binance. We will be using their dataset and analyzing Bitcoin daily closing price and trading volume variables in relation to global inflation metrics derived from per-country month-over-month changes in the Consumer Price Index (CPI). The inflation data we will be comparing it to is provided by The World Bank from their database<a href="https://www.worldbank.org/en/research/brief/inflation-database ">¹</a>. The World Bank is an exceptionally reliable source, getting the data for its datasets directly from the government agencies of each country it references. The data for this dataset was updated April 2024. 

We decided to focus on the inflation of G7 countries as they have the most stable and advanced economies, accounting for more than a third of the global GDP<a href="https://www.bbc.com/news/world-49434667">⁴</a>, and are great points of reference of the global economy as a whole. Another thing that is important to note is that unlike most projects, we will be creating a 2-numerical multiple regression model.

Here is a snapshot of 5 randomly chosen rows of the data set we’ll use from the CryptoCompare dataset:
```{r}
btc <- read_csv("../btcdailyprice.csv") %>%
  clean_names() %>%
  select(year:day, open:close)
set.seed(123) 
btc_sample <- btc %>% sample_n(5)
print(btc_sample)
```

Here is a snapshot of 5 randomly chosen rows of the filtered data set (only G7 countries) we’ll use from the World Bank dataset:
```{r}
globalinflation <- read_csv("../globalinflation.csv") %>%
  clean_names()
globalinflation <- globalinflation %>%
  mutate(g7 = rowMeans(select(globalinflation, united_states, united_kingdom, canada, france, germany, italy, japan), na.rm = TRUE))
set.seed(123)
globalinflation_sample <- globalinflation %>% sample_n(5)
globalinflation_sample <- globalinflation_sample %>% 
  select(united_states, united_kingdom, canada, france, germany, italy, japan, g7)
print(globalinflation_sample)
```

# 2. Exploratory data analysis

The CryptoCompare dataset had a sample size of 5586 for the daily price of BTC from 2009 to the present. The World Bank database, filtering out everything but the G7 countries, had a sample size of 1092, 156 for each country, or one data point a month from 2010 to 2023. We were luckily able to use every single data point and did not have to remove any from either sample.

```{r}
# remove days before btc was first traded
btc <- slice(btc, (561):nrow(btc))

# make single column date
btc$date <- dmy(paste(btc$day, btc$month, btc$year, sep = "-"))

# loading inflation data set
globalinflation <- read_csv("../globalinflation.csv") %>%
  clean_names()

# compute G7 monthly inflation average
globalinflation <- globalinflation %>%
  mutate(g7 = rowMeans(select(globalinflation, united_states, united_kingdom, canada, france, germany, italy, japan), na.rm = TRUE))

# make single column date
globalinflation$date <- my(paste(globalinflation$month, globalinflation$year, sep = "-"))

```

<br>

```{r, fig.width=8, fig.height=4.5, warning=FALSE}
ggplot(btc, aes(x = date, y = close)) +
  geom_line() +
  labs(title = "Bitcoin Price", x = "Date", y = "Closing Price [USD]") +
  theme_minimal()
```

<p style="text-align: center;">Figure 1 - Bitcoin Price</p> 

<br>

Figure 1 is a line graph of the closing price of Bitcoin over time. It highlights periods of significant growth or decline, visualizing the trends. Analyzing them can help us understand factors the influence Bitcoin's market value at certain times.

<br>


```{r, fig.width=8, fig.height=4.5, warning=FALSE}
ggplot(globalinflation, aes(x=date, y=g7)) +
  geom_line() +
  labs(title="Global Average CPI Inflation over Time", x="Time", y="Global Average CPI Inflation")
```

<p style="text-align: center;">Figure 2 - Global Average CPI Inflation (2018-2022)</p> 

<br>

Figure 2 is a line graph that illustrates the global average Consumer Price Index (CPI) inflation over time. By comparing this with Bitcoin's price trends, we can investigate potential correlations between global economic inflation and Bitcoin's value.

<br>


```{r, fig.width=8, fig.height=4.5, warning=FALSE}
ggplot(btc, aes(x=month, y=close)) +
  geom_boxplot() +
  labs(title="Monthly Variation in Bitcoin Closing Price", x="Month", y="Closing Price [USD]") +
  theme(axis.text.x=element_text(angle=45, hjust=1)) +
  theme_minimal()
  btc$cumulative_volume <- cumsum(btc$volumefrom)
```

<p style="text-align: center;">Figure 3 - Monthly Variation in Bitcoin Closing Price</p> 

<br>

Figure 3 breaks down Bitcoin's closing price by month, showing the distribution within each month. It highlights the intra-month variability and may help identify seasonal patterns or anomalies in Bitcoin's price movements.

<br>


```{r, fig.width=8, fig.height=4.5, warning=TRUE}
ggplot(btc, aes(x=date, y=cumulative_volume)) +
  geom_area(fill="green", alpha=0.5) +
  labs(title="Cumulative Volume of Bitcoin Traded Over Time", x="Date", y="Cumulative Volume Traded") +
  theme_minimal()
```

<p style="text-align: center;">Figure 4 - Cumulative Volume of Bitcoin Traded Over Time</p> 

<br>

Figure 4 is an area graph that depicts the cumulative trading volume of Bitcoin over time. It demonstrates the overall growth in Bitcoin trading activity, which can be an indicator of increasing or decreasing interest in the cryptocurrency. Not much to see here, to be honest!

<br>


```{r, fig.width=8, fig.height=4.5, warning=TRUE}
ggplot(btc, aes(x=volumefrom, y=close)) +
  geom_point(aes(color=close), alpha=0.6) +
  scale_color_gradient(low="blue", high="red") +
  labs(title="Trading Volume vs. Closing Price of Bitcoin", x="Volume Traded", y="Closing Price [USD]") +
  theme_minimal()
```

<p style="text-align: center;">Figure 5- Trading Volume vs. Closing Price of Bitcoin</p> 

<br>

Figure 5 is a scatter plot that explores the relationship between the trading volume and the closing price of Bitcoin. By examining how these two variables interact, we can gain insights into market dynamics, such as whether high trading volumes are associated with significant price changes. It would be very interesting to tie the color to another categorical variable, or even the size of the dots to another in order to visualize and communicate a lot of information.

<br>


```{r warning=FALSE}
btc$close_normalized <- btc$close / max(btc$close, na.rm = TRUE)

globalinflation$g7_normalized <- globalinflation$g7 / max(globalinflation$g7, na.rm = TRUE)

start_date <- max(min(btc$date), min(globalinflation$date))
end_date <- min(max(btc$date), max(globalinflation$date))

btc <- btc %>% filter(date >= start_date & date <= end_date)
globalinflation <- globalinflation %>% filter(date >= start_date & date <= end_date)

combined_data <- bind_rows(
  btc %>% select(date, close) %>% rename(value = close) %>% mutate(variable = "Bitcoin Price"),
  globalinflation %>% select(date, g7) %>% rename(value = g7) %>% mutate(variable = "Global Average CPI Inflation")
)

ggplot(combined_data, aes(x = date, y = value)) +
  geom_line() +
  facet_grid(rows = vars(variable), scales = "free_y") +
  labs(title = "Bitcoin Price and Global Average CPI Inflation", x = "Date", y = "Value") +
  theme_minimal()

```

<p style="text-align: center;">Figure 6 - Bitcoin Price and Global Average CPI Inflation</p> 

And lastly, Figure 6 is 2 line graphs on the same plane that directly show Bitcoin's Price and the Global Average CPI Inflation side by side. We thought it would be interesting to directly compare Bitcoin's Price and Average Inflation. Having these two values side by side can let us draw some basic correlations, and see if there seems to be any relationships between the two. If there are jumps in both in around the same time frame it could mean there is a relationship. Especially in the most recent years, we can see a major jump at around the same time. 

# 3 Multiple regression
In this section, we construct a multiple regression model to evaluate the relationship between Bitcoin's closing price (BTC) and the global inflation of fiat currency (monthly average) in G7 countries. Our model incorporates 2 numerical explanatory variables, as per the expressed permission of Dr. Oluwadare to not include a categorical variable, given the nature of the dataset.

### Components of the Multiple Regression Model
- **Dependent Variable:** Bitcoin's daily closing price (`btc$close`)
- **Independent Variables:**
  - **Inflation:** The interpolated daily inflation rates of the G7 countries (`interpolated_g7`). This represents the average inflation, capturing the economic climate of these countries.
  - **Date:** This variable helps account for any trends over time in Bitcoin's closing price.

### Model Fitting
We fit the model using the `lm()` function in R, specifying Bitcoin's closing price as a function of G7 inflation and the date. This model allows us to assess how changes in inflation and time influence BTC prices.

```{r}
# interpolate g7 average monthly inflation to daily in order to match frequency with btc data
interpolated_g7 <- approx(globalinflation$date, globalinflation$g7, xout = btc$date)$y

btc_model_cols <- data.frame(close = btc$close, inflation = interpolated_g7, date = btc$date)

# multiple regression model
btc_model <- lm(close ~ inflation + date, data = btc_model_cols)
get_regression_table(btc_model)
```


## 3.1 - Statistical interpretation
### Interpretation of Regression Table
The regression table provides the estimated impact of each predictor on Bitcoin’s closing price. The significant coefficients for both inflation and date indicate statistical relationships with Bitcoin prices:

- **Intercept (-113,847.799):** The model predicts a substantially negative base value for Bitcoin’s closing price at the start of our analysis period, which is statistically unrealistic and suggests potential issues with data scaling, the absence of necessary contextual variables, or simply that the linear model does not suit the non-linear nature of Bitcoin price fluctuations.
- **Inflation (Coefficient: 20,256.980):** The coefficient is extraordinarily high, suggesting that a unit increase in inflation would lead to an increase in Bitcoin's price by over $20,000. This is highly unrealistic and likely signifies overfitting or collinearity with the date or other unmeasured variables that are influencing Bitcoin's price. The strong statistical significance (p-value of 0) indicates a robust relationship, which implies that this is not a particularly useful or accurate model.
- **Date (Coefficient: 6.979):** The positive coefficient suggests a daily increase in Bitcoin’s closing price, aligning with the observed overall upward trend in historical price data. It is, however, unrealistically smooth and steady, ignoring the known volatility in Bitcoin prices.

### Tying Results to Exploratory Data Analysis (EDA)
The exploratory data analysis highlighted Bitcoin’s price volatility and its growth trend over time, which is consistent with the positive coefficient for the date variable. During EDA, no clear, consistent relationship between inflatian rates and Bitcoin prices could be inferred, suggesting the unsophisticated model might be capturing spurious correlations.

### Potential Limitations
- **Model Misfit:** The linear regression model may not be appropriate for data with the characteristics of cryptocurrency prices, which are highly non-linear and influenced by many simultaneous external factors.
- **Incorrect Data Handling:** The issues with the intercept and the inflation coefficient might also stem from how the data was prepared and entered into the model, suggesting potential scaling or transformation errors.
- **Lack of Relevant Variables:** The model excludes variables that could significantly impact Bitcoin prices, such as technological changes, regulatory updates, and shifts in investor sentiment.

## 3.2 - Non-statistical interpretation
In our study, we attempted to analyze how changes in global economic inflation (specifically from G7 countries) and the progression of time relate to the fluctuating price of Bitcoin. Here’s a straightforward breakdown of what our analysis found and what it might mean for someone without a statistical background:

- **Impact of Inflation on Bitcoin Prices:** Our model suggested a strong influence of inflation on Bitcoin prices, implying that as inflation in G7 countries increases, so does the price of Bitcoin. In numerical terms, our analysis indicated that for every point increase in inflation, the price of Bitcoin could rise by over $20,000. While this number might sound substantial, it's important to approach this finding with skepticism due to the overly simplified nature of our model and the unlikely magnitude of impact.
- **Time Influence on Bitcoin Prices:** Additionally, the model predicted that Bitcoin's price has a tendency to increase slightly every day, independent of other factors. This aligns with the general observation that Bitcoin's price has trended upwards over the years, but the model simplifies the fluctuations that occur from day to day and month to month.
Understanding Model Limitations: It's crucial to note that these findings, while interesting, are derived from a very simplified model that doesn't capture the plethora of factors that can influence Bitcoin prices—such as innovation, regulations, consumer confidence, and the Bitcoin halving. Therefore, the precision and reliability of these predictions are not high.
- **Reliability of Predictions:** Given the unrealistic coefficients and high standard errors (indicating large potential errors in prediction), the predictions from this model should not be used as a sole basis for investment decisions or understanding the cryptocurrency market. The actual market conditions are far more complex than what our simple model can account for.

# 4. Inference for multiple regression
```{r}
reg_points <- get_regression_points(btc_model)
```

To answer our research question, we need to test the following null hypothesis:
There is no relationship between G7 average CPI inflation and the closing price of Bitcoin (G7 slope = 0)

<center>

<img src="../assets/svg/hyp1_null.svg" alt="Null Hypothesis 1" onerror="this.onerror=null; this.src='https://github.com/jbraseth/cryptchosen/tree/feature/final-project/assets/svg/hyp1_null.svg'">

<img src="../assets/svg/hyp1_alt.svg" alt="Alternate Hypothesis 1" onerror="this.onerror=null; this.src='https://github.com/jbraseth/cryptchosen/tree/feature/final-project/assets/svg/hyp1_alt.svg'">

</center>

As mentioned in the statistical analysis section, our model indicates an extremely positive relationship between G7 CPI inflation and
the closing price of Bitcoin, with a slope coefficient of **20,256.980**.

Combined with a p-value of **0** and a confidence interval of **19,059.112 to 21,454.848**, our model indicates that the relationship is statistically and practically significant. As a result, we can reject the first null hypothesis.

As part of our multiple regression model, we can also study the relationship between time and the closing price of Bitcoin.
To do this, we test the following null hypothesis: There is no relationship between time and the closing price of Bitcoin (Date slope = 0)

<center>

<img src="../assets/svg/hyp2_null.svg" alt="Null Hypothesis 2" onerror="this.onerror=null; this.src='https://github.com/jbraseth/cryptchosen/tree/feature/final-project/assets/svg/hyp2_null.svg'">

<img src="../assets/svg/hyp2_alt.svg" alt="Alternate Hypothesis 2" onerror="this.onerror=null; this.src='https://github.com/jbraseth/cryptchosen/tree/feature/final-project/assets/svg/hyp2_alt.svg'">

</center>

Our model indicates an overall positive relationship between time and
the closing price of Bitcoin, with a slope coefficient of **6.979**.

With another p-value of **0** and a confidence interval of **6.762 to 7.196**, our model shows that this relationship is statistically and practically significant as well. As a result, we can reject the second null hypothesis.

However, we have mentioned previously that our model is likely not complex enough to accurately determine the relationships between the closing price of Bitcoin and potentially related explanatory variables. To explore this further, we will conduct a residual analysis.

## 4.1 - Residual analysis
<center>
```{r}
ggplot(data = reg_points, aes(x = residual)) +
  geom_histogram(binwidth = 3000, fill = "deepskyblue4", color = "white") +
  labs(title = "Histogram of Residuals",
       x = "Residuals",
       y = "Frequency")
```

The frequency of residual values with a bin width of 3,000
<br>
<br>

```{r}
ggplot(data = reg_points, aes(x = close_hat, y = residual)) +
  geom_point(color = "deepskyblue4") +
  geom_hline(yintercept = 0, linetype = "dashed", color = "red") +
  labs(title = "Fitted Values vs. Residuals",
       x = "Fitted",
       y = "Residual")
```

The distribution of fitted values relative to residuals
<br>
<br>

```{r}
ggplot(data = reg_points, aes(x = inflation, y = residual)) +
  geom_point(color = "deepskyblue4") +
  geom_hline(yintercept = 0, linetype = "dashed", color = "red") +
  labs(title = "G7 CPI Inflation vs. Residuals",
       x = "Inflation",
       y = "Residual")
```

The distribution of G7 CPI inflation values relative to residuals
<br>
<br>

```{r}
ggplot(data = reg_points, aes(x = date, y = residual)) +
  geom_point(color = "deepskyblue4") +
  geom_hline(yintercept = 0, linetype = "dashed", color = "red") +
  labs(title = "Date vs. Residuals",
       x = "Date",
       y = "Residual")
```

The distribution of dates relative to residuals
</center>
<br>
<br>

While our residuals seem to be somewhat normally distributed, there is obvious linear patterning visible in the residuals when graphed relative to the fitted values and explanatory variables. This is another indicator that our model is not suitable for regression and inference. As mentioned in the regression section, there are likely far more explanatory variables influencing the closing price of Bitcoin, and it is extremely unlikely that a simple linear regression model such as the one we created would be able to accurately perform inference for this complicated set of relationships.


# 5. Conclusion

## 5.1 - Conclusions

Conclusion. Was there a correlation?

## 5.2 - Limitations

Limitations we had

## 5.3 - Further questions

Questions the data provokes


# 6. Citations and References
A Global Database of Inflation. (n.d.). World Bank. https://www.worldbank.org/en/research/brief/inflation-database

<br>

CryptoCompare Gets FCA Authorization to Operate as Benchmark Administrator. (2021, November 4). Yahoo Finance. https://finance.yahoo.com/news/cryptocompare-gets-fca-authorization-operate-125346571.htmlCryptocurrency API, Historical & Real-Time Market Data. (n.d.). 

<br>

CryptoCompare. Retrieved April 29, 2024, from https://min-api.cryptocompare.com/documentation?key=Historical&cat=dataHistoday

<br>

What is the G7 summit and what does it do? (2019, August 23). BBC News. https://www.bbc.com/news/world-49434667
